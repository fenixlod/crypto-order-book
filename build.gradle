plugins {
	id 'java'
	id 'application'
}

group = 'com.lunix'
version = '1.0.0'

ext {
}

java {
	sourceCompatibility = '17'
}

repositories {
	mavenCentral()
}

dependencies {
	implementation("com.fasterxml.jackson.core:jackson-databind:2.16.0")
	testImplementation('org.junit.jupiter:junit-jupiter:5.10.1')
}

tasks.named('test') {
	useJUnitPlatform()
	testLogging {
		events "passed", "skipped", "failed"
	}
}

application {
    mainClassName = "com.lunix.orderbook.JavaApplication"
}

task customBootJar(type: Jar) {
	group = "build"
	description = "Creates a self-contained fat JAR of the application that can be run."
    manifest {
        attributes 'Main-Class': 'com.lunix.orderbook.JavaApplication'
    }
    
    archiveClassifier = "all"
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    from {
    	configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    with jar
}
